{% extends "base.html" %}
{% block content %}
<div class="auth-wrapper">
    <div class="login-container">
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="CakeHistory Logo" class="auth-logo">

        <h2>Welcome to CakeHistory</h2>
        <p>Sign in to explore our delicious world of cakes!</p>

        <form method="POST" action="{{ url_for('login_user_route') }}">
            <input type="email" name="email" placeholder="Email Address" required>

            <!-- Password input with toggle eye icon -->
            <div class="input-wrapper">
                <input type="password" id="password" name="password" placeholder="Password" required>
                <i class="fa-solid fa-eye toggle-password" data-target="password"></i>
            </div>

            <button type="submit">Login</button>
        </form>

        <!-- Flash messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <p class="flash-message {{ category }}">{{ message }}</p>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <p class="register-link">
            Donâ€™t have an account?
            <a href="{{ url_for('register') }}">Register here</a>
        </p>

        <a href="{{ url_for('menu') }}" class="back-btn">
            <i class="fas fa-arrow-left"></i> Back to Menu
        </a>
    </div>
</div>

<!-- Toggle Password Script -->
<script>
document.querySelectorAll('.toggle-password').forEach(icon => {
    icon.addEventListener('click', () => {
        const targetId = icon.getAttribute('data-target');
        const input = document.getElementById(targetId);

        if (input.type === "password") {
            input.type = "text";
            icon.classList.replace('fa-eye', 'fa-eye-slash');
        } else {
            input.type = "password";
            icon.classList.replace('fa-eye-slash', 'fa-eye');
        }
    });
});
</script>
{% endblock %}
