{% extends "base.html" %}
{% block content %}
<div class="auth-wrapper">
    <div class="register-container">
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="CakeHistory Logo" class="auth-logo">

        <h2>Create Your Account</h2>
        <form method="POST" action="{{ url_for('register') }}" onsubmit="return validatePasswordMatch()">
            <input type="text" name="name" placeholder="Full Name" required>
            <input type="email" name="email" placeholder="Email Address" required>
            <input type="password" id="password" name="password" placeholder="Password" required>
            <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirm Password" required>

            <p id="password-error" style="color: red; font-size: 14px; display: none;">Passwords do not match.</p>

            <div class="subscribe-box">
                <input type="checkbox" id="subscribed" name="subscribed" value="yes">
                <label for="subscribed">I would like to receive CakeHistoryâ€™s latest offers and seasonal updates.</label>
            </div>

            <button type="submit">Register</button>
        </form>

        <p class="login-link">
            Already have an account?
            <a href="{{ url_for('login_user_route') }}">Login here</a>
        </p>
    </div>
</div>

<!-- Password match validation script -->
<script>
function validatePasswordMatch() {
    const password = document.getElementById("password").value.trim();
    const confirmPassword = document.getElementById("confirm_password").value.trim();
    const errorText = document.getElementById("password-error");

    if (password !== confirmPassword) {
        errorText.style.display = "block";
        return false; // prevent form submission
    } else {
        errorText.style.display = "none";
        return true;
    }
}
</script>
{% endblock %}
